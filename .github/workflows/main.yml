name: Build Docker Images

on:
  push:
    branches: ["main"]
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    # Checkout your repository
    - name: Checkout code
      uses: actions/checkout@v3

    # Set up Docker Buildx
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v2

    # Build Backend Image
    - name: Build backend image
      run: |
        docker build -t backend-image:latest ./backend

    # Build Frontend Image
    - name: Build frontend image
      run: |
        docker build -t frontend-image:latest ./frontend

    # Validate Docker Compose Build
    - name: Build using Docker Compose
      run: |
        docker compose -f docker-compose.yml build
